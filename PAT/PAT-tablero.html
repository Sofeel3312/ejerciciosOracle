<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Tablero Institucional</title>
  <link rel="stylesheet" href="../PAT/PAT.css">
</head>
<body>
  <!-- 游릶 Men칰 lateral institucional -->
  <aside class="menu-lateral">
    <h1 class="menu-titulo">Men칰 principal</h1>
    <ul id="menuLateral">
      <!-- Este men칰 se llenar치 con JavaScript seg칰n el usuario -->
    </ul>
  </aside>

  <!-- 游릳 Encabezado superior con nombre y cerrar sesi칩n -->
<header class="barra-superior">
  <h2 id="bienvenidaHeader">Bienvenido</h2>
  <button onclick="cerrarSesion()" class="btn-close">Cerrar sesi칩n 游</button>
</header>

  <!-- 游릱 Panel central con mensaje y botones -->
  <main class="contenedor">
    <section class="panel-central">
      <p id="mensajeUnidad">Aqu칤 puedes consultar tus m칩dulos y reportes personalizados.</p>
    </section>

    <section class="top-bar" id="botonesUnidad">
      <!-- Botones solo visibles para el administrador -->
    </section>
  </main>

  <!-- 游댢 Script din치mico de personalizaci칩n -->
  <script>
  window.addEventListener("DOMContentLoaded", function() {  
    const usuario = sessionStorage.getItem("usuarioActivo");
    const nombreUnidad = sessionStorage.getItem("nombreUnidad");

    const descripciones = {
      "Inicio": "Retorna",
      "Archivos actualizados": "Descarga de archivos y consultas",
      "Dashboard": "Inhabilitado, solo para consultas",
      "Anexo Estad칤stico": "Carga tu informaci칩n aqu칤",
      "Informe Escrito": "Carga tu informaci칩n aqu칤",
      "PAT": "Carga tu informaci칩n aqu칤",
      "Indicadores": "Inhabilitado, solo para consultas",
      "Calendario": "Cronograma anual y eventos institucionales",
      "Comunicados": "Capacitaciones y formaci칩n",
};

    const datos = {
      salud: {
        menu: ["Inicio", "Archivos actualizados", "Dashboard", "Anexo Estad칤stico", "Informe Escrito", "PAT", "Indicadores", "Calendario", "Comunicados"],
        mensaje: "Este es tu tablero personalizado. Aqu칤 puedes consultar tus archivos, indicadores y reportes."
      },
      finanzas: {
        menu: ["Inicio", "Archivos actualizados", "Dashboard", "Anexo Estad칤stico", "Informe Escrito", "PAT", "Indicadores", "Calendario", "Comunicados"],
        mensaje: "Este es tu tablero personalizado. Aqu칤 puedes consultar tus archivos, indicadores y reportes."
      },
      admin: {
        menu: ["Inicio", "Archivos actualizados", "Dashboard", "Anexo Estad칤stico", "Informe Escrito", "PAT", "Indicadores", "Calendario", "Comunicados"],
        mensaje: "Modo administrador activo. Puedes acceder a todas las unidades y gestionar el sistema."
      },
      calidad: {
        menu: ["Inicio", "Archivos actualizados", "Dashboard", "Anexo Estad칤stico", "Informe Escrito", "PAT", "Indicadores", "Calendario", "Comunicados"],
        mensaje: "Este es tu tablero personalizado. Aqu칤 puedes consultar tus archivos, indicadores y reportes."
      },
      comunitaria: {
        menu: ["Inicio", "Archivos actualizados", "Dashboard", "Anexo Estad칤stico", "Informe Escrito", "PAT", "Indicadores", "Calendario", "Comunicados"],
        mensaje: "Este es tu tablero personalizado. Aqu칤 puedes consultar tus archivos, indicadores y reportes."
      },
      infraestructura: {
        menu: ["Inicio", "Archivos actualizados", "Dashboard", "Anexo Estad칤stico", "Informe Escrito", "PAT", "Indicadores", "Calendario", "Comunicados"],
        mensaje: "Este es tu tablero personalizado. Aqu칤 puedes consultar tus archivos, indicadores y reportes."
      },
      juridico: {
        menu: ["Inicio", "Archivos actualizados", "Dashboard", "Anexo Estad칤stico", "Informe Escrito", "PAT", "Indicadores", "Calendario", "Comunicados"],
        mensaje: "Este es tu tablero personalizado. Aqu칤 puedes consultar tus archivos, indicadores y reportes."
      },
      planeacion: {
        menu: ["Inicio", "Archivos actualizados", "Dashboard", "Anexo Estad칤stico", "Informe Escrito", "PAT", "Indicadores", "Calendario", "Comunicados"],
        mensaje: "Este es tu tablero personalizado. Aqu칤 puedes consultar tus archivos, indicadores y reportes."
      }, 
      transparencia: {
        menu: ["Inicio", "Archivos actualizados", "Dashboard", "Anexo Estad칤stico", "Informe Escrito", "PAT", "Indicadores", "Calendario", "Comunicados"],
        mensaje: "Este es tu tablero personalizado. Aqu칤 puedes consultar tus archivos, indicadores y reportes."
      }
    };
    
    //Validacion de acceso
    if (!usuario || !datos[usuario]) {
      alert("Acceso no autorizado");
      window.location.href = "../accesoUsuario/PAT-accesoUsuario.html";
      return;
    }

    //saludo institucional
    document.getElementById("bienvenidaHeader").textContent = `Bienvenido, ${nombreUnidad}`;
    document.getElementById("mensajeUnidad").textContent = datos[usuario].mensaje;

// 游댕 Men칰 lateral con 칤conos din치micos
    const iconos = {
      "Inicio": "游",
      "Archivos actualizados": "游늬",
      "Dashboard": "游늵",
      "Anexo Estad칤stico": "游늳",
      "Informe Escrito": "游닇",
      "PAT": "游꿢",
      "Indicadores": "游늳",
      "Calendario": "游늰",
      "Comunicados": "游닉",
    };

    const menu = document.getElementById("menuLateral");
    datos[usuario].menu.forEach(opcion => {
      const li = document.createElement("li");
      const icono = iconos[opcion] || "游늯";

      const enlace = document.createElement("a");
      enlace.href = "#";
      enlace.innerHTML = `<span class="icono">${icono}</span>${opcion}`;
      enlace.setAttribute("data-tooltip", descripciones[opcion] || `Ir a ${opcion}`);

      li.appendChild(enlace);
      menu.appendChild(li);
});


  // 游댏 Botones exclusivos para administrador
  if (usuario === "admin") {
    const botones = document.getElementById("botonesUnidad");
    const unidades = Object.keys(datos).filter(u => u !== "admin");
    unidades.forEach(u => {
      const btn = document.createElement("button");
      btn.className = "btn-admin";
      btn.textContent = datos[u].menu[1]; // ejemplo: "Presupuesto"
      btn.onclick = () => alert(`Accediendo a m칩dulo de ${datos[u].menu[1]}`);
      botones.appendChild(btn);
    });
  }

  // 游댘 Cierre de sesi칩n seguro
  window.cerrarSesion = function () {
    sessionStorage.clear();
    window.location.href = "../PAT/accesoUsuario/PAT-accesoUsuario.html";
  };
});
</script>
</body>
</html>



